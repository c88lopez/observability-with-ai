{
  "id": null,
  "uid": "mongodb-overview",
  "title": "MongoDB Overview",
  "tags": ["database", "mongodb"],
  "schemaVersion": 36,
  "version": 1,
  "refresh": "30s",
  "panels": [
    {"type": "stat", "title": "MongoDB Up", "id": 1, "gridPos": {"h":4,"w":4,"x":0,"y":0}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [{"expr": "mongodb_up", "refId": "A"}]},
  {"type": "timeseries", "title": "DB Objects", "id": 2, "gridPos": {"h":6,"w":8,"x":4,"y":0}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [{"expr": "mongodb_dbstats_objects{database=~\"test|admin\"}", "refId": "A", "legendFormat": "{{database}} objs"}]},
  {"type": "timeseries", "title": "DB Size (Data)", "id": 3, "gridPos": {"h":6,"w":12,"x":12,"y":0}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [{"expr": "mongodb_dbstats_dataSize{database=~\"test|admin\"}", "refId": "A", "legendFormat": "{{database}}"}], "fieldConfig": {"defaults": {"unit": "bytes"}}},
  {"type": "timeseries", "title": "Indexes Size", "id": 4, "gridPos": {"h":6,"w":12,"x":24,"y":0}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [{"expr": "mongodb_dbstats_indexSize{database=~\"test|admin\"}", "refId": "A", "legendFormat": "{{database}}"}], "fieldConfig": {"defaults": {"unit": "bytes"}}},
  {"type": "timeseries", "title": "Collections Count", "id": 5, "gridPos": {"h":6,"w":8,"x":0,"y":6}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [{"expr": "mongodb_dbstats_collections{database=~\"test|admin\"}", "refId": "A", "legendFormat": "{{database}}"}]},
  {"type": "timeseries", "title": "Asserts (User / Regular)", "id": 6, "gridPos": {"h":6,"w":8,"x":8,"y":6}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [ {"expr": "mongodb_ss_asserts{assert_type=\"user\"}", "refId": "A", "legendFormat": "user"}, {"expr": "mongodb_ss_asserts{assert_type=\"regular\"}", "refId": "B", "legendFormat": "regular"} ]},
  {"type": "timeseries", "title": "Slow Query Count", "id": 7, "gridPos": {"h":6,"w":8,"x":16,"y":6}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [{"expr": "mongodb_profile_slow_query_count{database=~\"test|admin\"}", "refId": "A", "legendFormat": "{{database}}"}]},
  {"type": "timeseries", "title": "FS Used Size", "id": 8, "gridPos": {"h":6,"w":12,"x":24,"y":6}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [{"expr": "mongodb_dbstats_fsUsedSize{database=~\"test|admin\"}", "refId": "A", "legendFormat": "{{database}}"}], "fieldConfig": {"defaults": {"unit": "bytes"}}},
  {"type": "timeseries", "title": "Connections (Current/Active)", "id": 9, "gridPos": {"h":6,"w":12,"x":0,"y":12}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [ {"expr": "mongodb_ss_connections{conn_type=\"current\"}", "refId": "A", "legendFormat": "current"}, {"expr": "mongodb_ss_connections{conn_type=\"active\"}", "refId": "B", "legendFormat": "active"} ]},
  {"type": "timeseries", "title": "Lock Queue (Readers/Writers)", "id": 10, "gridPos": {"h":6,"w":12,"x":12,"y":12}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [ {"expr": "mongodb_ss_globalLock_currentQueue{count_type=\"readers\"}", "refId": "A", "legendFormat": "readers"}, {"expr": "mongodb_ss_globalLock_currentQueue{count_type=\"writers\"}", "refId": "B", "legendFormat": "writers"} ]},
  {"type": "timeseries", "title": "Aggregate Command Count", "id": 11, "gridPos": {"h":6,"w":12,"x":24,"y":12}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [ {"expr": "rate(mongodb_ss_metrics_commands_aggregate_total[5m])", "refId": "A", "legendFormat": "aggregate rate"} ]},
  {"type": "timeseries", "title": "Cursor Timeouts", "id": 12, "gridPos": {"h":6,"w":12,"x":0,"y":18}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [ {"expr": "increase(mongodb_ss_metrics_cursor_timedOut[15m])", "refId": "A", "legendFormat": "timed out (15m)"} ]},
  {"type": "timeseries", "title": "Lock Acquire (Global r/w)", "id": 13, "gridPos": {"h":6,"w":12,"x":12,"y":18}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [ {"expr": "rate(mongodb_ss_locks_Global_acquireCount_r[5m])", "refId": "A", "legendFormat": "global r"}, {"expr": "rate(mongodb_ss_locks_Global_acquireCount_w[5m])", "refId": "B", "legendFormat": "global w"} ]},
  {"type": "timeseries", "title": "Collection Scans", "id": 14, "gridPos": {"h":6,"w":12,"x":24,"y":18}, "datasource": {"type":"prometheus","uid":"prometheus"}, "targets": [ {"expr": "rate(mongodb_ss_metrics_queryExecutor_collectionScans_total[5m])", "refId": "A", "legendFormat": "coll scans"} ]}
  ],
  "time": {"from": "now-1h", "to": "now"}
}
